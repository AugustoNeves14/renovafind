{'role': 'assistant', 'content': 'Let\'s create the main backend files starting with the app.js:\n\n<function_calls>\n<create-file file_path="angocine/backend/src/app.js">\nconst express = require(\'express\');\nconst cors = require(\'cors\');\nconst helmet = require(\'helmet\');\nconst morgan = require(\'morgan\');\nconst path = require(\'path\');\nrequire(\'dotenv\').config();\n\n// Import routes\nconst authRoutes = require(\'./routes/auth.routes\');\nconst moviesRoutes = require(\'./routes/movies.routes\');\nconst userRoutes = require(\'./routes/user.routes\');\nconst adminRoutes = require(\'./routes/admin.routes\');\nconst analyticsRoutes = require(\'./routes/analytics.routes\');\n\n// Import middleware\nconst { authenticateToken } = require(\'./middleware/auth.middleware\');\n\nconst app = express();\n\n// Middleware\napp.use(cors());\napp.use(helmet());\napp.use(morgan(\'dev\'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\n\n// Static files for video streaming\napp.use(\'/videos\', express.static(path.join(__dirname, \'../videos\')));\napp.use(\'/images\', express.static(path.join(__dirname, \'../images\')));\n\n// Routes\napp.use(\'/api/auth\', authRoutes);\napp.use(\'/api/movies\', moviesRoutes);\napp.use(\'/api/user\', authenticateToken, userRoutes);\napp.use(\'/api/admin\', authenticateToken, adminRoutes);\napp.use(\'/api/analytics\', authenticateToken, analyticsRoutes);\n\n// Health check route\napp.get(\'/health\', (req, res) => {\n  res.status(200).json({ status: \'ok\', message: \'AngoCine API is running\' });\n});\n\n// Error handling middleware\napp.use((err, req, res, next) => {\n  console.error(err.stack);\n  res.status(500).json({\n    error: true,\n    message: err.message || \'Internal Server Error\',\n  });\n});\n\nmodule.exports = app;\n</create-file>\n</function_calls>'}