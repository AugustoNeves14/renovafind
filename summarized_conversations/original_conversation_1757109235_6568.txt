{'role': 'assistant', 'content': 'Let\'s create the profile page component HTML:\n\n<function_calls>\n<create-file file_path="angocine/frontend/angocine/src/app/pages/profile/profile.component.html">\n<div class="profile-page">\n  <div class="container">\n    <!-- Loading State -->\n    <div *ngIf="isLoading" class="loading-container">\n      <div class="spinner"></div>\n      <p>Carregando perfil...</p>\n    </div>\n    \n    <!-- Error State -->\n    <div *ngIf="error" class="error-container">\n      <div class="alert alert-danger" role="alert">\n        <i class="fas fa-exclamation-circle me-2"></i>\n        {{ error }}\n      </div>\n      <button class="btn btn-primary mt-3" routerLink="/">Voltar para Home</button>\n    </div>\n    \n    <!-- Profile Content -->\n    <div *ngIf="!isLoading && !error && currentUser" class="profile-content">\n      <!-- Profile Header -->\n      <div class="profile-header">\n        <div class="row align-items-center">\n          <div class="col-md-6">\n            <h1 class="profile-title">Minha Conta</h1>\n          </div>\n          <div class="col-md-6 text-md-end">\n            <!-- Current Profile Selector -->\n            <div class="current-profile" *ngIf="currentProfile" (click)="openProfileSelector()">\n              <img [src]="currentProfile.avatar" [alt]="currentProfile.name" class="profile-avatar">\n              <div class="profile-info">\n                <span class="profile-name">{{ currentProfile.name }}</span>\n                <span class="profile-switch">Trocar Perfil <i class="fas fa-chevron-down"></i></span>\n              </div>\n            </div>\n            \n            <!-- No Profile Selected -->\n            <div class="no-profile" *ngIf="!currentProfile">\n              <button class="btn btn-primary" (click)="openProfileSelector()">\n                <i class="fas fa-user-circle me-2"></i> Selecionar Perfil\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Profile Navigation -->\n      <ul class="nav nav-tabs profile-tabs">\n        <li class="nav-item">\n          <a class="nav-link" [class.active]="activeTab === \'profile\'" (click)="setActiveTab(\'profile\')">\n            <i class="fas fa-user me-2"></i> Perfil\n          </a>\n        </li>\n        <li class="nav-item">\n          <a class="nav-link" [class.active]="activeTab === \'watchlist\'" (click)="setActiveTab(\'watchlist\')">\n            <i class="fas fa-bookmark me-2"></i> Minha Lista\n          </a>\n        </li>\n        <li class="nav-item">\n          <a class="nav-link" [class.active]="activeTab === \'history\'" (click)="setActiveTab(\'history\')">\n            <i class="fas fa-history me-2"></i> Histórico\n          </a>\n        </li>\n        <li class="nav-item">\n          <a class="nav-link" [class.active]="activeTab === \'profiles\'" (click)="setActiveTab(\'profiles\')">\n            <i class="fas fa-users me-2"></i> Perfis\n          </a>\n        </li>\n        <li class="nav-item">\n          <a class="nav-link" [class.active]="activeTab === \'settings\'" (click)="setActiveTab(\'settings\')">\n            <i class="fas fa-cog me-2"></i> Configurações\n          </a>\n        </li>\n      </ul>\n      \n      <!-- Tab Content -->\n      <div class="tab-content">\n        <!-- Profile Tab -->\n        <div class="tab-pane fade" [class.show]="activeTab === \'profile\'" [class.active]="activeTab === \'profile\'">\n          <div class="profile-section">\n            <div class="row">\n              <div class="col-md-4 mb-4">\n                <div class="profile-card">\n                  <div class="profile-card-header">\n                    <h3>Informações da Conta</h3>\n                  </div>\n                  <div class="profile-card-body">\n                    <div class="profile-info-item">\n                      <span class="info-label">Nome de Usuário:</span>\n                      <span class="info-value">{{ currentUser.username }}</span>\n                    </div>\n                    <div class="profile-info-item">\n                      <span class="info-label">Email:</span>\n                      <span class="info-value">{{ currentUser.email }}</span>\n                    </div>\n                    <div class="profile-info-item">\n                      <span class="info-label">Tipo de Conta:</span>\n                      <span class="info-value">{{ currentUser.role === \'admin\' ? \'Administrador\' : \'Usuário\' }}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              <div class="col-md-8">\n                <div class="profile-card">\n                  <div class="profile-card-header">\n                    <h3>Perfil Atual</h3>\n                  </div>\n                  <div class="profile-card-body">\n                    <!-- No Profile Selected -->\n                    <div *ngIf="!currentProfile" class="no-profile-selected">\n                      <p>Você ainda não selecionou um perfil.</p>\n                      <button class="btn btn-primary" (click)="openProfileSelector()">\n                        Selecionar Perfil\n                      </button>\n                    </div>\n                    \n                    <!-- Current Profile -->\n                    <div *ngIf="currentProfile" class="current-profile-details">\n                      <div class="profile-avatar-large">\n                        <img [src]="currentProfile.avatar" [alt]="currentProfile.name">\n                      </div>\n                      <div class="profile-details">\n                        <h4>{{ currentProfile.name }}</h4>\n                        <span class="profile-badge" *ngIf="currentProfile.is_kid">Infantil</span>\n                        <button class="btn btn-outline-primary mt-3" (click)="openProfileSelector()">\n                          Trocar Perfil\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Watchlist Tab -->\n        <div class="tab-pane fade" [class.show]="activeTab === \'watchlist\'" [class.active]="activeTab === \'watchlist\'">\n          <div class="profile-section">\n            <h2 class="section-title">Minha Lista</h2>\n            \n            <!-- Loading State -->\n            <div *ngIf="isLoadingWatchlist" class="loading-container">\n              <div class="spinner"></div>\n              <p>Carregando lista...</p>\n            </div>\n            \n            <!-- No Profile Selected -->\n            <div *ngIf="!currentProfile && !isLoadingWatchlist" class="no-profile-selected">\n              <p>Selecione um perfil para ver sua lista de filmes.</p>\n              <button class="btn btn-primary" (click)="openProfileSelector()">\n                Selecionar Perfil\n              </button>\n            </div>\n            \n            <!-- Empty Watchlist -->\n            <div *ngIf="currentProfile && !isLoadingWatchlist && watchlist.length === 0" class="empty-state">\n              <i class="fas fa-bookmark"></i>\n              <h3>Sua lista está vazia</h3>\n              <p>Adicione filmes à sua lista para assistir mais tarde.</p>\n              <button class="btn btn-primary" routerLink="/browse">\n                Explorar Catálogo\n              </button>\n            </div>\n            \n            <!-- Watchlist Movies -->\n            <div *ngIf="currentProfile && !isLoadingWatchlist && watchlist.length > 0" class="movies-grid">\n              <div *ngFor="let item of watchlist" class="movie-item">\n                <app-movie-card [movie]="item"></app-movie-card>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- History Tab -->\n        <div class="tab-pane fade" [class.show]="activeTab === \'history\'" [class.active]="activeTab === \'history\'">\n          <div class="profile-section">\n            <h2 class="section-title">Histórico de Visualização</h2>\n            \n            <!-- Loading State -->\n            <div *ngIf="isLoadingHistory" class="loading-container">\n              <div class="spinner"></div>\n              <p>Carregando histórico...</p>\n            </div>\n            \n            <!-- No Profile Selected -->\n            <div *ngIf="!currentProfile && !isLoadingHistory" class="no-profile-selected">\n              <p>Selecione um perfil para ver seu histórico de visualização.</p>\n              <button class="btn btn-primary" (click)="openProfileSelector()">\n                Selecionar Perfil\n              </button>\n            </div>\n            \n            <!-- Empty History -->\n            <div *ngIf="currentProfile && !isLoadingHistory && watchHistory.length === 0" class="empty-state">\n              <i class="fas fa-history"></i>\n              <h3>Seu histórico está vazio</h3>\n              <p>Assista a filmes para construir seu histórico de visualização.</p>\n              <button class="btn btn-primary" routerLink="/browse">\n                Explorar Catálogo\n              </button>\n            </div>\n            \n            <!-- History Items -->\n            <div *ngIf="currentProfile && !isLoadingHistory && watchHistory.length > 0" class="history-list">\n              <div *ngFor="let item of watchHistory" class="history-item">\n                <div class="history-poster">\n                  <img [src]="item.poster_url" [alt]="item.title">\n                </div>\n                <div class="history-details">\n                  <h4 class="history-title">{{ item.title }}</h4>\n                  <div class="history-meta">\n                    <span class="history-year">{{ item.release_year }}</span>\n                    <span class="history-date">Assistido em: {{ item.last_watched | date:\'dd/MM/yyyy\' }}</span>\n                  </div>\n                  <div class="history-progress">\n                    <div class="progress-label">\n                      <span>Progresso: {{ item.progress }}%</span>\n                      <span *ngIf="item.completed" class="completed-badge">Concluído</span>\n                    </div>\n                    <div class="progress">\n                      <div class="progress-bar" [style.width.%]="item.progress"></div>\n                    </div>\n                  </div>\n                </div>\n                <div class="history-actions">\n                  <a [routerLink]="[\'/watch\', item.movie_id]" class="btn btn-primary">\n                    <i class="fas fa-play"></i>\n                  </a>\n                  <a [routerLink]="[\'/movie\', item.movie_id]" class="btn btn-outline-secondary">\n                    <i class="fas fa-info-circle"></i>\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Profiles Tab -->\n        <div class="tab-pane fade" [class.show]="activeTab === \'profiles\'" [class.active]="activeTab === \'profiles\'">\n          <div class="profile-section">\n            <div class="section-header">\n              <h2 class="section-title">Gerenciar Perfis</h2>\n              <button *ngIf="profiles.length < 5" class="btn btn-primary" (click)="openAddProfileForm()">\n                <i class="fas fa-plus me-2"></i> Novo Perfil\n              </button>\n            </div>\n            \n            <!-- Profiles List -->\n            <div class="profiles-grid">\n              <div *ngFor="let profile of profiles" class="profile-manage-item">\n                <div class="profile-avatar-wrapper" [class.active]="currentProfile?.id === profile.id">\n                  <img [src]="profile.avatar" [alt]="profile.name" class="profile-avatar">\n                  <div class="profile-avatar-overlay" *ngIf="currentProfile?.id === profile.id">\n                    <i class="fas fa-check"></i>\n                  </div>\n                </div>\n                <h4 class="profile-name">{{ profile.name }}</h4>\n                <span class="profile-badge" *ngIf="profile.is_kid">Infantil</span>\n                <div class="profile-actions">\n                  <button class="btn btn-sm btn-primary" (click)="selectProfile(profile)">\n                    <i class="fas fa-user-check"></i> Selecionar\n                  </button>\n                  <button class="btn btn-sm btn-outline-secondary" (click)="openEditProfileForm(profile)">\n                    <i class="fas fa-edit"></i> Editar\n                  </button>\n                  <button class="btn btn-sm btn-outline-danger" (click)="deleteProfile(profile)">\n                    <i class="fas fa-trash-alt"></i> Excluir\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Settings Tab -->\n        <div class="tab-pane fade" [class.show]="activeTab === \'settings\'" [class.active]="activeTab === \'settings\'">\n          <div class="profile-section">\n            <h2 class="section-title">Configurações da Conta</h2>\n            \n            <!-- Account Settings Form -->\n            <div class="settings-card">\n              <div class="settings-card-header">\n                <h3>Informações Pessoais</h3>\n              </div>\n              <div class="settings-card-body">\n                <form [formGroup]="userForm" (ngSubmit)="updateUserProfile()">\n                  <div class="mb-3">\n                    <label for="username" class="form-label">Nome de Usuário</label>\n                    <input type="text" class="form-control" id="username" formControlName="username">\n                    <div *ngIf="userForm.get(\'username\')?.invalid && userForm.get(\'username\')?.touched" class="form-error">\n                      Nome de usuário é obrigatório e deve ter pelo menos 3 caracteres.\n                    </div>\n                  </div>\n                  \n                  <div class="mb-3">\n                    <label for="email" class="form-label">Email</label>\n                    <input type="email" class="form-control" id="email" formControlName="email">\n                    <div *ngIf="userForm.get(\'email\')?.invalid && userForm.get(\'email\')?.touched" class="form-error">\n                      Email inválido.\n                    </div>\n                  </div>\n                  \n                  <div class="password-section">\n                    <h4>Alterar Senha</h4>\n                    <p class="text-muted">Deixe em branco para manter a senha atual.</p>\n                    \n                    <div class="mb-3">\n                      <label for="current_password" class="form-label">Senha Atual</label>\n                      <input type="password" class="form-control" id="current_password" formControlName="current_password">\n                    </div>\n                    \n                    <div class="mb-3">\n                      <label for="new_password" class="form-label">Nova Senha</label>\n                      <input type="password" class="form-control" id="new_password" formControlName="new_password">\n                    </div>\n                    \n                    <div class="mb-3">\n                      <label for="confirm_password" class="form-label">Confirmar Nova Senha</label>\n                      <input type="password" class="form-control" id="confirm_password" formControlName="confirm_password">\n                    </div>\n                  </div>\n                  \n                  <div *ngIf="userUpdateError" class="alert alert-danger">\n                    {{ userUpdateError }}\n                  </div>\n                  \n                  <div class="form-actions">\n                    <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid || isUpdatingUser">\n                      <span *ngIf="isUpdatingUser" class="spinner-border spinner-border-sm me-2" role="status"></span>\n                      Salvar Alterações\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n            \n            <!-- Logout Button -->\n            <div class="logout-section">\n              <button class="btn btn-outline-danger" (click)="logout()">\n                <i class="fas fa-sign-out-alt me-2"></i> Sair da Conta\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  \n  <!-- Profile Selector Modal -->\n  <app-modal *ngIf="showProfileSelector" title="Selecionar Perfil" (closed)="closeProfileSelector()">\n    <app-profile-switcher \n      [showAddButton]="false" \n      [showManageButton]="false"\n      (profileSelected)="selectProfile($event)">\n    </app-profile-switcher>\n  </app-modal>\n  \n  <!-- Add Profile Modal -->\n  <app-modal *ngIf="showAddProfileForm" title="Adicionar Perfil" (closed)="closeAddProfileForm()">\n    <form [formGroup]="profileForm" (ngSubmit)="createProfile()">\n      <div class="mb-3">\n        <label for="profileName" class="form-label">Nome do Perfil</label>\n        <input type="text" class="form-control" id="profileName" formControlName="name">\n        <div *ngIf="profileForm.get(\'name\')?.invalid && profileForm.get(\'name\')?.touched" class="form-error">\n          Nome do perfil é obrigatório e deve ter pelo menos 2 caracteres.\n        </div>\n      </div>\n      \n      <div class="mb-3">\n        <label for="profileAvatar" class="form-label">Avatar (URL)</label>\n        <input type="text" class="form-control" id="profileAvatar" formControlName="avatar">\n        <div class="avatar-preview mt-2">\n          <img [src]="profileForm.get(\'avatar\')?.value" alt="Avatar Preview">\n        </div>\n      </div>\n      \n      <div class="mb-3 form-check">\n        <input type="checkbox" class="form-check-input" id="isKid" formControlName="is_kid">\n        <label class="form-check-label" for="isKid">Perfil Infantil</label>\n      </div>\n      \n      <div *ngIf="profileUpdateError" class="alert alert-danger">\n        {{ profileUpdateError }}\n      </div>\n      \n      <div class="form-actions">\n        <button type="button" class="btn btn-secondary" (click)="closeAddProfileForm()">Cancelar</button>\n        <button type="submit" class="btn btn-primary" [disabled]="profileForm.invalid || isCreatingProfile">\n          <span *ngIf="isCreatingProfile" class="spinner-border spinner-border-sm me-2" role="status"></span>\n          Criar Perfil\n        </button>\n      </div>\n    </form>\n  </app-modal>\n  \n  <!-- Edit Profile Modal -->\n  <app-modal *ngIf="showEditProfileForm" title="Editar Perfil" (closed)="closeEditProfileForm()">\n    <form [formGroup]="profileForm" (ngSubmit)="updateProfile()">\n      <div class="mb-3">\n        <label for="editProfileName" class="form-label">Nome do Perfil</label>\n        <input type="text" class="form-control" id="editProfileName" formControlName="name">\n        <div *ngIf="profileForm.get(\'name\')?.invalid && profileForm.get(\'name\')?.touched" class="form-error">\n          Nome do perfil é obrigatório e deve ter pelo menos 2 caracteres.\n        </div>\n      </div>\n      \n      <div class="mb-3">\n        <label for="editProfileAvatar" class="form-label">Avatar (URL)</label>\n        <input type="text" class="form-control" id="editProfileAvatar" formControlName="avatar">\n        <div class="avatar-preview mt-2">\n          <img [src]="profileForm.get(\'avatar\')?.value" alt="Avatar Preview">\n        </div>\n      </div>\n      \n      <div class="mb-3 form-check">\n        <input type="checkbox" class="form-check-input" id="editIsKid" formControlName="is_kid">\n        <label class="form-check-label" for="editIsKid">Perfil Infantil</label>\n      </div>\n      \n      <div *ngIf="profileUpdateError" class="alert alert-danger">\n        {{ profileUpdateError }}\n      </div>\n      \n      <div class="form-actions">\n        <button type="button" class="btn btn-secondary" (click)="closeEditProfileForm()">Cancelar</button>\n        <button type="submit" class="btn btn-primary" [disabled]="profileForm.invalid || isUpdatingProfile">\n          <span *ngIf="isUpdatingProfile" class="spinner-border spinner-border-sm me-2" role="status"></span>\n          Salvar Alterações\n        </button>\n      </div>\n    </form>\n  </app-modal>\n</div>\n</create-file>\n</function_calls>'}